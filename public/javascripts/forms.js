// Generated by CoffeeScript 1.3.3
(function() {

  $(document).ready(function() {
    $("#modal-form-login").modal({
      show: false
    });
    $("#modal-form-register").modal({
      show: false
    });
    $("#modal-form-activate").modal({
      show: false
    });
    $("#modal-form-project").modal({
      show: false
    });
    $("#modal-form-cluster").modal({
      show: false
    });
    $("#modal-form-linpack").modal({
      show: false
    });
    $("#modal-form-component").modal({
      show: false
    });
    $("#button-login").click(function() {
      return $("#modal-form-login").modal("show");
    });
    $("#button-register").click(function() {
      return $("#modal-form-register").modal("show");
    });
    $("#button-activate").click(function() {
      return $("#modal-form-activate").modal("show");
    });
    $("#button-new-project").click(function() {
      return $("#modal-form-project").modal("show");
    });
    $("#button-new-cluster").click(function() {
      return $("#modal-form-cluster").modal("show");
    });
    $("#button-new-linpack").click(function() {
      return $("#modal-form-linpack").modal("show");
    });
    $("#button-new-component").click(function() {
      return $("#modal-form-component").modal("show");
    });
    $("#form-login").find("button").button();
    $("#form-register").find("button").button();
    $(".open-login").click(function() {
      var id;
      id = $(this).attr("now");
      $(id).hide();
      return $("#login").show();
    });
    $(".open-register").click(function() {
      var id;
      id = $(this).attr("now");
      $(id).hide();
      return $("#register").show();
    });
    $(".open-activate").click(function() {
      var id;
      id = $(this).attr("now");
      $(id).hide();
      return $("#activate").show();
    });
    $("#form-login").submit(function() {
      $(this).find('button').button('loading');
      $.ajax({
        data: $("#form-login").serialize(),
        url: $("#form-login").attr("action"),
        type: $("#form-login").attr("method"),
        statusCode: {
          200: function(data) {},
          400: function(xhr) {
            var data, error, _i, _len, _ref, _results;
            data = JSON.parse(xhr.responseText);
            $("#login").find(".code-400").show();
            _ref = data.errors;
            _results = [];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              error = _ref[_i];
              _results.push($("#ctrl-login-" + error.param).addClass("warning"));
            }
            return _results;
          },
          404: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          500: function(xhr) {}
        }
      });
      $(this).find('button').button("reset");
      return false;
    });
    $("#form-register").submit(function() {
      $(this).find("button").button("loading");
      $.ajax({
        data: $("#form-register").serialize(),
        url: $("#form-register").attr("action"),
        type: $("#form-register").attr("method"),
        statusCode: {
          200: function(data) {
            $("#register").hide();
            $("#activate").show();
            return $("#activate").find(".code-200").show();
          },
          400: function(xhr) {
            var data, error, _i, _len, _ref, _results;
            data = JSON.parse(xhr.responseText);
            $("#register").find(".code-400").show();
            _ref = data.errors;
            _results = [];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              error = _ref[_i];
              _results.push($("#ctrl-register-" + error.param).addClass("warning"));
            }
            return _results;
          },
          410: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          500: function(xhr) {}
        }
      });
      $(this).find('button').button("reset");
      return false;
    });
    $("#form-activate").submit(function() {
      $(this).find("button").button("loading");
      $.ajax({
        data: $("#form-activate").serialize(),
        url: $("#form-activate").attr("action"),
        type: $("#form-activate").attr("method"),
        statusCode: {
          200: function(data) {
            $("#activate").hide();
            $("#login").show();
            return $("#login").find(".code-200").show();
          },
          400: function(xhr) {
            var data, error, _i, _len, _ref, _results;
            data = JSON.parse(xhr.responseText);
            $("#activate").find(".code-400").show();
            $("#form-activate").each(function() {
              return this.reset();
            });
            _ref = data.errors;
            _results = [];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              error = _ref[_i];
              _results.push($("#ctrl-activate-" + error.param).addClass("warning"));
            }
            return _results;
          },
          404: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          500: function(xhr) {}
        }
      });
      $(this).find('button').button("reset");
      return false;
    });
    $("#button-save-project").click(function() {
      $.ajax({
        data: $("#form-project").serialize(),
        url: $("#form-project").attr("action"),
        type: $("#form-project").attr("method"),
        statusCode: {
          200: function(data) {},
          400: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          401: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          500: function(xhr) {}
        }
      });
      return false;
    });
    $("#button-save-cluster").click(function() {
      $.ajax({
        data: $("#form-cluster").serialize(),
        url: $("#form-cluster").attr("action"),
        type: $("#form-cluster").attr("method"),
        statusCode: {
          200: function(data) {},
          400: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          401: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          500: function(xhr) {}
        }
      });
      return false;
    });
    $("#button-save-linpack").click(function() {
      $.ajax({
        data: $("#form-linpack").serialize(),
        url: $("#form-linpack").attr("action"),
        type: $("#form-linpack").attr("method"),
        statusCode: {
          200: function(data) {},
          400: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          401: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          500: function(xhr) {}
        }
      });
      return false;
    });
    return $("#button-save-component").click(function() {
      $.ajax({
        data: $("#form-component").serialize(),
        url: $("#form-component").attr("action"),
        type: $("#form-component").attr("method"),
        statusCode: {
          200: function(data) {},
          400: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          401: function(xhr) {
            var data;
            return data = JSON.parse(xhr.responseText);
          },
          500: function(xhr) {}
        }
      });
      return false;
    });
  });

}).call(this);
